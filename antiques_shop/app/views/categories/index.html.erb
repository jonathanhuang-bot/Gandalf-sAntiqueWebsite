<!-- Main Header -->
<header class="main-header">
  <div class="header-container">
    <div class="nav-menu">
      <!-- Left side navigation -->
      <div class="dropdown">
        <a href="/categories" class="nav-link dropdown-trigger">Shop</a>
        <div class="dropdown-content">
          <% @categories.each do |category| %>
            <%= link_to category.name, category_path(category), class: "dropdown-item" %>
          <% end %>
        </div>
      </div>
      <a href="#" class="nav-link">About</a>
      <a href="#" class="nav-link">Contact</a>
    </div>

    <div class="nav-menu">
      <!-- Right side navigation -->
      <%= form_with(url: categories_path, method: :get, class: "search-form") do |f| %>
        <%= f.text_field :search, placeholder: "Search items...", class: "search-input", value: @search_query %>
        <%= f.submit "Search", class: "search-button" %>
      <% end %>
      <a href="#" class="nav-link">Cart</a>
    </div>
  </div>
</header>

<% unless @search_query.present? %>
  <!-- Logo Section -->
  <section class="logo-section">
    <%= image_tag "GandalfAntiqueShopLogo.JPG", alt: "Antique Treasures", class: "logo-image" %>
  </section>
<% end %>

<!-- Items Grid -->
<section class="items-container">
  <% if @search_query.present? %>
    <div class="search-results-header">
      <h2>Search results for "<%= @search_query %>"</h2>
      <p><%= pluralize(@items.count, 'item') %> found</p>
      <%= link_to "Clear search", categories_path, class: "clear-search-link" %>
    </div>
  <% end %>

  <% if @items.any? %>
    <div class="items-grid">
      <% @items.each do |item| %>
        <div class="item-card">
          <div class="item-image">
            <% if item.image.attached? %>
              <%= image_tag item.image, style: "width: 100%; height: 250px; object-fit: cover;" %>
            <% else %>
              <span>No Image Available</span>
            <% end %>
          </div>
          <div class="item-info">
            <h3 class="item-name">
              <%= link_to item.name, "/items/" + item.id.to_s %>
            </h3>
            <p class="item-price">$<%= item.price %></p>
            <p class="item-category"><%= item.category.name %></p>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="no-results">
      <p>No items found matching your search.</p>
      <%= link_to "View all items", categories_path, class: "clear-search-link" %>
    </div>
  <% end %>
</section>